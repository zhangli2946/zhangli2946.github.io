<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="author" content="Marlon Cabrera Oliveira">
    <meta name="description" content="Hugo theme using tachyons.io & geomicons.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic|PT+Mono&amp;subset=latin,cyrillic">
    <link rel="stylesheet" href="../../css/tachyons.css">
    <style>
        .geomicon { width: 1.5em; height: 1.5em; color: #405660; }
        body{ font-family:'PT Sans', sans-serif; }
    </style>
  </head>
  <body>
      <header class="tc pal bb b-near-white">
    <h1 class="f6 thin i link-child"><a href="../../">li çš„ Blog</a></h1>
        <nav>
          <ul class="list pln">
            <li class="dib prm"><a href="../../"><span class="js-geomicon geomicon" data-icon="home"></span>Home</a></li>
            <li class="dib prm"><a href="../../post"><span class="js-geomicon geomicon" data-icon="compose"></span>Posts</a></li>
            <li class="dib prm"><a href="../../about"><span class="js-geomicon geomicon" data-icon="user"></span>About</a></li>
          </ul>
        </nav>
        </header>


  <main class="pal">

    <h1>Go Module ä¸ ç§æœ‰åº“</h1>
    <h2>Feb 27, 2020</h2>
      <p>[200~# go module ä¸ ç§æœ‰åº“</p>
<blockquote>
<p>ç”±äºå…¬å¸ vcs è®¾ç½®ç¼˜æ•… é¡¹ç›®åŸºæœ¬å­˜åœ¨äº subgroup ä¸‹ ä¸” import è·¯å¾„ä¹Ÿæœ‰å±äº project çš„ subdir
è¿™å°±éœ€è¦å…¬å¸çš„ vcs èƒ½å¤Ÿé€‚åº” ?go-get=1 è®¿é—® subdir æˆ– subgroup æ—¶èƒ½ç»™å‡ºæ­£ç¡®çš„ clone åœ°å€</p>
</blockquote>
<h2 id="é—®é¢˜èƒŒæ™¯">é—®é¢˜èƒŒæ™¯</h2>
<blockquote>
<p>å…¬å¸ vcs ç³»ç»Ÿä½¿ç”¨ gitlab-ce 10.6.5 ç‰ˆæœ¬
æºç  module ä¿å­˜åœ¨ subgroup å’Œ subdir ä¸‹
vcs æ²¡æœ‰ https ç«¯ç‚¹</p>
</blockquote>
<h2 id="è°ƒæŸ¥èŒƒå›´">è°ƒæŸ¥èŒƒå›´</h2>
<ol>
<li>module get çš„å·¥ä½œæ–¹å¼</li>
<li>gitlab å“åº”é€»è¾‘</li>
<li>æ­£å¸¸å·¥ä½œçš„å¿…è¦æ¡ä»¶</li>
<li>è®¤è¯</li>
<li>è”é€š</li>
<li>ç¼–è¯‘</li>
</ol>
<h2 id="å®é™…å·¥ä½œ">å®é™…å·¥ä½œ</h2>
<h3 id="æœåŠ¡æ­å»ºä¸é…ç½®">æœåŠ¡æ­å»ºä¸é…ç½®</h3>
<h4 id="è¯ä¹¦ä¸ç­¾å">è¯ä¹¦ä¸ç­¾å</h4>
<blockquote>
<p><a href="https://www.akadia.com/services/ssh_test_certificate.html">è‹±æ–‡å‚è€ƒ</a></p>
</blockquote>
<h5 id="è‡ªç­¾åè¯ä¹¦">è‡ªç­¾åè¯ä¹¦</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 1.ç”Ÿæˆç§é’¥</span>
$ openssl genrsa -out server.key <span style="color:#ae81ff">2048</span>

<span style="color:#75715e"># 2.ç”Ÿæˆ CSR (Certificate Signing Request)</span>
$ openssl req -new -key server.key -out server.csr

<span style="color:#75715e"># 3.ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</span>
$ openssl x509 -req -days <span style="color:#ae81ff">3650</span> -in server.csr -signkey server.key -out server.crt
</code></pre></div><h5 id="è‡ªå»º-ca-ç­¾åè¯ä¹¦">è‡ªå»º CA ç­¾åè¯ä¹¦</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 1.åˆ›å»º CA ç§é’¥</span>
$ openssl genrsa -out ca.key <span style="color:#ae81ff">2048</span>

<span style="color:#75715e"># 2.ç”Ÿæˆ CA çš„è‡ªç­¾åè¯ä¹¦</span>
$ openssl req -new -x509 -days <span style="color:#ae81ff">3650</span> -key ca.key -out ca.crt

<span style="color:#75715e"># 3.ç”Ÿæˆéœ€è¦é¢å‘è¯ä¹¦çš„ç§é’¥</span>
$ openssl genrsa -out server.key <span style="color:#ae81ff">2048</span>

<span style="color:#75715e"># 4.ç”Ÿæˆè¦é¢å‘è¯ä¹¦çš„è¯ä¹¦ç­¾åè¯·æ±‚ï¼Œè¯ä¹¦ç­¾åè¯·æ±‚å½“ä¸­çš„ Common Name å¿…é¡»åŒºåˆ«äº CA çš„è¯ä¹¦é‡Œé¢çš„ Common Name</span>
$ openssl req -new -key server.key -out server.csr

<span style="color:#75715e"># 5.ç”¨ 2 åˆ›å»ºçš„ CA è¯ä¹¦ç»™ 4 ç”Ÿæˆçš„ ç­¾åè¯·æ±‚ è¿›è¡Œç­¾å</span>
$ openssl x509 -req -days <span style="color:#ae81ff">3650</span> -in server.csr -CA ca.crt -CAkey ca.key -set_serial <span style="color:#ae81ff">01</span> -out server.crt
</code></pre></div><h3 id="å·¥å…·è®¿é—®ä¸å°è¯•">å·¥å…·è®¿é—®ä¸å°è¯•</h3>
<h4 id="æ¨¡æ‹Ÿè®¿é—®">æ¨¡æ‹Ÿè®¿é—®</h4>
<h5 id="curl-æ¨¡æ‹Ÿ">CURL æ¨¡æ‹Ÿ</h5>
<h5 id="postman-æ¨¡æ‹Ÿ">POSTMAN æ¨¡æ‹Ÿ</h5>
<h5 id="httpie-æ¨¡æ‹Ÿ">HTTPie æ¨¡æ‹Ÿ</h5>
<h4 id="go-mod-è®¿é—®">go mod è®¿é—®</h4>
<h3 id="æºç é˜…è¯»ä¸åˆ†æ">æºç é˜…è¯»ä¸åˆ†æ</h3>
<h4 id="gitlab-æºç -go-middleware-éƒ¨åˆ†">gitlab æºç  Go Middleware éƒ¨åˆ†</h4>
<h4 id="go-mod-æºç -module-lookup-éƒ¨åˆ†">go mod æºç  Module Lookup éƒ¨åˆ†</h4>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<h3 id="å¤–éƒ¨è¯„ä»·">å¤–éƒ¨è¯„ä»·</h3>
<h3 id="å†…éƒ¨è¯„ä»·">å†…éƒ¨è¯„ä»·</h3>
<h2 id="é™„å½•">é™„å½•</h2>
<h3 id="å¤šçº§è¯ä¹¦ç­¾å">å¤šçº§è¯ä¹¦ç­¾å</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ç”Ÿæˆæ ¹ CA å¹¶è‡ªç­¾ï¼ˆCommon Name å¡« RootCAï¼‰</span>
$ openssl genrsa -des3 -out keys/RootCA.key <span style="color:#ae81ff">2048</span>
$ openssl req -new -x509 -days <span style="color:#ae81ff">3650</span> -key keys/RootCA.key -out keys/RootCA.crt
<span style="color:#75715e"># ç”ŸæˆäºŒçº§ CAï¼ˆCommon Name å¡« SecondCAï¼‰</span>
$ openssl genrsa -des3 -out keys/secondCA.key <span style="color:#ae81ff">2048</span>
$ openssl rsa -in keys/secondCA.key -out keys/secondCA.key
$ openssl req -new -days <span style="color:#ae81ff">3650</span> -key keys/secondCA.key -out keys/secondCA.csr
$ openssl ca -extensions v3_ca -in keys/secondCA.csr -config /etc/pki/tls/openssl.cnf -days <span style="color:#ae81ff">3650</span> -out keys/secondCA.crt -cert keys/RootCA.crt -keyfile keys/RootCA.key
<span style="color:#75715e"># ç”Ÿæˆä¸‰çº§ CAï¼ˆCommon Name å¡« ThirdCAï¼‰</span>
$ openssl genrsa -des3 -out keys/thirdCA.key <span style="color:#ae81ff">2048</span>
$ openssl rsa -in keys/thirdCA.key -out keys/thirdCA.key
$ openssl req -new -days <span style="color:#ae81ff">3650</span> -key keys/thirdCA.key -out keys/thirdCA.csr
$ openssl ca -extensions v3_ca -in keys/thirdCA.csr -config /etc/pki/tls/openssl.cnf -days <span style="color:#ae81ff">3650</span> -out keys/thirdCA.crt -cert keys/secondCA.crt -keyfile keys/secondCA.key
<span style="color:#75715e"># ä½¿ç”¨ä¸‰çº§ CA ç­¾å‘æœåŠ¡å™¨è¯ä¹¦</span>
$ openssl genrsa -des3 -out keys/server.key <span style="color:#ae81ff">2048</span>
$ openssl rsa -in keys/server.key -out keys/server.key
$ openssl req -new -days <span style="color:#ae81ff">3650</span> -key keys/server.key -out keys/server.csr
$ openssl ca -in keys/server.csr -config /etc/pki/tls/openssl.cnf -days <span style="color:#ae81ff">3650</span> -out keys/server.crt -cert keys/thirdCA.crt -keyfile keys/thirdCA.key
</code></pre></div><h3 id="build--x">build -x</h3>
<blockquote>
<p>ä½¿ç”¨ go build -x èƒ½çœ‹åˆ°æ›´å¤š go module build æœŸé—´æ›´å¤šçš„ç»†èŠ‚</p>
</blockquote>
<h3 id="go-mod-download">go mod download</h3>
<blockquote>
<p>modfetch ä½¿ç”¨ BasicAuth æ–¹å¼å°†ç™»å½•ä¿¡æ¯æ³¨å…¥ http è¯·æ±‚ <a href="https://github.com/golang/go/blob/ee04dbf430de4343a3406253a132267bea38d3e6/src/cmd/go/internal/web/http.go#L89">æºç &gt;</a>
auth ä¿¡æ¯æ¥æº è§£æ .netrc <a href="https://github.com/golang/go/blob/ee04dbf430de4343a3406253a132267bea38d3e6/src/cmd/go/internal/auth/auth.go#L12">æºç &gt;</a></p>
</blockquote>


  </main>

<footer class="tc center bt b--near-white pvx phm pax-m phxl-l pvx-l">
        <small class="f5 mw7 db center phm lh-copy">
          <nav>
              <ul class="list pln">
                  <li class="dib prm"><a href="https://www.github.com"><span class="js-geomicon geomicon blue" data-icon="github"></span></a></li>
              </ul>
              </nav>
              Copyright-  2015~2020
        </small>
    </footer>
  </body>
</html>

